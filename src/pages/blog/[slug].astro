---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
// @ts-ignore: types generated by Astro during `astro sync`
import { getEntryBySlug } from 'astro:content';
const { slug } = Astro.params;
const post = await getEntryBySlug('blog', slug) as any;
---
<BaseLayout title={post.data.title} description={post.data.description} canonical={`https://atrayobesidad.com/blog/${post.slug}`}>
  <Header slot="header" />

  <article class="max-w-3xl mx-auto px-4 py-12">
    <h1 class="text-2xl font-bold">{post.data.title}</h1>
    <p class="text-sm text-gray-500 mt-2">{new Date(post.data.date).toLocaleDateString('es-ES')}</p>
    <div class="prose mt-6">{post.body}</div>
  </article>

  <script type="application/ld+json">
  {JSON.stringify({
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": post.data.title,
    "description": post.data.description,
    "url": `https://atrayobesidad.com/blog/${post.slug}`,
    "datePublished": post.data.date,
    "author": {
      "@type": "Organization",
      "name": "ATRA y Obesidad Salamanca"
    }
  })}
  </script>

  <Footer slot="footer" />
</BaseLayout>